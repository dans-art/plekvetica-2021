let plek_user={default_button_texts:default_button_texts={},construct(){default_button_texts.submit=jQuery('input[type="submit"]').val(),jQuery("#plek-submit").click(function(e){e.preventDefault();let t=jQuery(this).data("type");plek_user.submit(t)}),jQuery('#register-new-user input[type!="submit"]').click(function(){jQuery("#plek-submit").val(plek_user.default_button_texts.submit)}),jQuery('#plek-user-settings-form input[type="submit"]').click(function(e){if(e.preventDefault(),"user-settings-cancel"!==e.currentTarget.id){var t=jQuery("#plek-user-settings-form").serialize();plek_user.save_user_settings(t)}else history.back()})},submit(e){switch(e){case"add-user-account":return void this.add_user_account()}},add_user_account(){plek_main.activate_button_loader("#plek-submit","Erstelle Konto..."),plek_main.remove_field_errors();let e=jQuery("#plek-submit"),t={action:"plek_user_actions",do:"add_user_account"};t.user_display_name=jQuery("#user_display_name").val(),t.user_name=jQuery("#user_name").val(),t.user_email=jQuery("#user_email").val(),jQuery.ajax({url:window.ajaxurl,type:"POST",cache:!1,data:t,success:function(t){let r=plek_main.get_text_from_ajax_request(t,!0);!0===plek_main.show_field_errors(t)?r="Das Formular enthält Fehler, bitte korrigieren":(plek_main.deactivate_button(e),jQuery('#register-new-user input[type!="submit"]').val("")),plek_main.deactivate_button_loader(e,r)},error:function(t){plek_main.deactivate_button_loader(e,"Error loading data.... ")}})},save_user_settings(e){plek_main.activate_button_loader("#user-settings-submit","Speichere Einstellungen..."),plek_main.remove_field_errors(),console.log("Save user settings");let t=jQuery("#user-settings-submit");console.log(e),e+="&action=plek_user_actions",e+="&do=save_user_settings",console.log(e),jQuery.ajax({url:window.ajaxurl,type:"POST",cache:!1,data:e,success:function(e){let r=plek_main.get_text_from_ajax_request(e,!0);!0===plek_main.show_field_errors(e)?(console.log("Contains Errors"),r="Das Formular enthält Fehler, bitte korrigieren"):r=plek_main.get_text_from_ajax_request(e,!0),plek_main.deactivate_button_loader(t,r)},error:function(e){plek_main.deactivate_button_loader(t,"Error loading data.... ")}})}};plek_user.construct();