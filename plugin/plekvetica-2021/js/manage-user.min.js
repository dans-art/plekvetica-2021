let plek_user={default_button_texts:default_button_texts={},construct(){default_button_texts.submit=jQuery("#user-settings-submit").text(),jQuery("#plek-submit").click(function(e){e.preventDefault();let t=jQuery(this).data("type");plek_user.submit(t)}),jQuery('#register-new-user input[type!="submit"]').click(function(){jQuery("#plek-submit").val(plek_user.default_button_texts.submit)}),jQuery("#plek-user-settings-form button").click(function(e){if(e.preventDefault(),"user-settings-cancel"!==e.currentTarget.id){var t=jQuery("#plek-user-settings-form").serialize();plek_user.save_user_settings(t)}else{var r=document.referrer;if("undefined"!=typeof URLSearchParams&&r.includes("?")){var u=new URLSearchParams(r);u.delete("key"),u.delete("unlock"),r=unescape(u.toString())}location.href=r}})},submit(e){switch(e){case"add-user-account":this.add_user_account()}},add_user_account(){let e=jQuery("#plek-submit"),t=e.text();plek_main.activate_button_loader("#plek-submit","Erstelle Konto..."),plek_main.remove_field_errors();let r=jQuery("#register-new-user-form").serialize();r+="&action=plek_user_actions",r+="&do=add_user_account",jQuery.ajax({url:window.ajaxurl,type:"POST",cache:!1,data:r,success:function(r){let u=plek_main.get_text_from_ajax_request(r,!0);!0===plek_main.show_field_errors(r,"#register-new-user-form")?(u="Das Formular enthält Fehler, bitte korrigieren",plek_user.reset_button_text_after_input_focus(e,t)):(plek_main.deactivate_button(e),jQuery('#register-new-user input[type!="submit"]').val("")),plek_main.deactivate_button_loader(e,u)},error:function(t){plek_main.deactivate_button_loader(e,"Error loading data.... ")}})},save_user_settings(e){plek_main.activate_button_loader("#user-settings-submit","Speichere Einstellungen..."),plek_main.remove_field_errors();let t=jQuery("#user-settings-submit");e+="&action=plek_user_actions",e+="&do=save_user_settings",jQuery.ajax({url:window.ajaxurl,type:"POST",cache:!1,data:e,success:function(e){let r=plek_main.get_text_from_ajax_request(e,!0);!0===plek_main.show_field_errors(e,"#plek-user-settings-form")?(console.log("Contains Errors"),r="Das Formular enthält Fehler, bitte korrigieren"):r=plek_main.get_text_from_ajax_request(e,!0),plek_main.deactivate_button_loader(t,r),jQuery("#user-settings-cancel").text(plek_lang.trans("Zurück")),setTimeout(()=>{jQuery("#user-settings-submit").text(plek_user.default_button_texts.submit)},5e3)},error:function(e){plek_main.deactivate_button_loader(t,"Error loading data.... ")}})},reset_button_text_after_input_focus(e,t){jQuery("input").focus(function(){jQuery(e).text(t)})}};plek_user.construct();