let plek_band={default_button_texts:default_button_texts={},construct(){jQuery(document).ready((function(){jQuery("select").select2()})),default_button_texts.submit=jQuery("#band-form-submit").text(),jQuery("#plek-band-form button").click((function(e){if(e.preventDefault(),"band-form-cancel"!==e.currentTarget.id)if("band-form-submit"!==e.currentTarget.id);else{var data=jQuery("#plek-band-form").serialize();plek_band.save_band(data)}else history.back()}))},get_youtube_video(video_id){var data=new FormData;data.append("action","plek_band_actions"),data.append("do","get_youtube_video"),data.append("video_id",video_id),jQuery.ajax({url:window.ajaxurl,type:"POST",cache:!1,data:data,processData:!1,contentType:!1,success:function success(data){console.log("success"),jQuery("#plek-band-form").append(data)},error:function error(data){console.log(data)}})},save_band(data){plek_main.activate_button_loader("#band-form-submit","Speichere Einstellungen..."),plek_main.remove_field_errors();let button=jQuery("#band-form-submit"),form=document.getElementById("plek-band-form");var data;(data=new FormData(form)).append("action","plek_band_actions"),data.append("do","save_band");var file_data=jQuery("#band-logo").prop("files")[0];data.append("band-logo-data",file_data),data.append("band-logo","666"),jQuery.ajax({url:window.ajaxurl,type:"POST",cache:!1,processData:!1,contentType:!1,data:data,success:function success(data){let text=plek_main.get_text_from_ajax_request(data,!0),errors;!0===plek_main.show_field_errors(data)?(console.log("Contains Errors"),text="Das Formular enthält Fehler, bitte korrigieren"):text=plek_main.get_text_from_ajax_request(data,!0),plek_main.deactivate_button_loader(button,text),jQuery("#band-form-cancel").text(plek_lang.trans("Zurück")),setTimeout(()=>{jQuery("#band-form-submit").text(plek_band.default_button_texts.submit)},5e3)},error:function error(data){plek_main.deactivate_button_loader(button,"Error loading data.... ")}})}};plek_band.construct();