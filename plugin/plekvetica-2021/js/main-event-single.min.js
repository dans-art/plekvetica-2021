let plek_single_event_main={breakpoint:767,container_height:"50",shorten_threshold:15,content_description:jQuery("#event-content .event-description"),content_videos:jQuery("#event-content .event-video-container"),current_width:null,construct(){this.current_width=jQuery(window).width(),this.on_resize(),jQuery(window).resize(()=>{jQuery(window).width()!==this.current_width&&(this.on_resize(),this.current_width=jQuery(window).width())}),jQuery(document).ready(()=>{this.add_event_listener()})},on_resize(){let width;jQuery(document).width()<this.breakpoint?this.shorten_content():this.enlarge_content()},shorten_content(){this.read_more_button(this.content_description)?(this.content_description.data("orig_height",this.content_description.height()),this.content_description.css("height",this.container_height+"vw")):this.content_description.css("height","auto"),this.read_more_button(this.content_videos)?(this.content_videos.data("orig_height",this.content_videos.height()),this.content_videos.css("height",this.container_height+"vw")):this.content_videos.css("height","auto")},enlarge_content(){this.content_description.css("height","auto"),this.content_videos.css("height","auto"),jQuery(".plek-expand-shorten-text").remove()},read_more_button(content){let content_class=content.attr("class"),orig_height=content.height(),max_height=this.vw_to_pixel(this.container_height);return!0===this.show_read_more_button(orig_height,max_height)?(0===jQuery("#show_more_"+content_class).length&&(content.after(`<div id='show_more_${content_class}' class='plek-expand-shorten-text'>Mehr anzeigen</div>`),jQuery("#show_more_"+content_class).click(btn=>{this.toggle_read_more(btn)})),!0):(content.next("#show_more_"+content_class).remove(),!1)},toggle_read_more(btn){let content=jQuery(btn.target).prev(),content_height=content.height(),shorten_height=this.vw_to_pixel(this.container_height),orig_height=content.data("orig_height"),text="Mehr anzeigen",animate_to=0;content_height==orig_height?(text="Mehr anzeigen",jQuery(btn.target).removeClass("arrow-up"),animate_to=shorten_height,this.scroll_to_content_top(content)):(text="Weniger anzeigen",jQuery(btn.target).addClass("arrow-up"),animate_to=orig_height),content.animate({height:animate_to},200),jQuery(btn.target).text(text)},pixel_to_vw:pixel=>pixel*(100/jQuery(window).width()),vw_to_pixel:vw=>vw/100*jQuery(window).width(),show_read_more_button(orig_height,max_height){if(orig_height<10)return!1;let prozent;return orig_height/max_height*100-100>this.shorten_threshold},scroll_to_content_top(content){let pos_top=content.position().top;jQuery(document).scrollTop(pos_top)},add_event_listener(){jQuery("#promoteEvent").click(()=>{plek_main.activate_button_loader("#promoteEvent","Promote Event..."),this.do_ajax_promote_event()}),jQuery("#plekSetAkkreiCrewBtn").click(()=>{plek_main.activate_button_loader("#plekSetAkkreiCrewBtn","Registriere akkreditierung..."),plek_single_event_main.do_ajax_add_akkredi_member()}),jQuery("#plekRemoveAkkreiCrewBtn").click(()=>{plek_main.activate_button_loader("#plekRemoveAkkreiCrewBtn","Lösche akkreditierung..."),plek_single_event_main.do_ajax_remove_akkredi_member()}),jQuery("#plekSetEventStatus").click(()=>{plek_main.activate_button_loader("#plekSetEventStatus","Veröffentliche Event..."),plek_single_event_main.do_ajax_publish_event()})},do_ajax_promote_event(){let button=jQuery("#promoteEvent"),event_id=button.data("eventid");jQuery.ajax({url:window.ajaxurl,data:{action:"plek_event_actions",do:"promote_event",id:event_id},success:function success(data){let text=plek_single_event_main.get_text_from_ajax_request(data);plek_main.deactivate_button_loader(button,text),plek_main.deactivate_button(button)},error:function error(data){plek_main.deactivate_button_loader(button,"Error loading data.... ")}})},do_ajax_add_akkredi_member(){let button=jQuery("#plekSetAkkreiCrewBtn"),event_id=button.data("eventid"),user=button.data("user"),type=button.data("type");jQuery.ajax({url:window.ajaxurl,data:{action:"plek_set_Accredi_status",user:user,id:event_id,type:type},success:function success(data){let text=plek_single_event_main.get_text_from_ajax_request(data);plek_main.deactivate_button_loader(button,text),plek_main.deactivate_button(button)},error:function error(data){plek_main.deactivate_button_loader(button,"Error loading data.... ")}})},get_text_from_ajax_request(data){try{let encoded_data=JSON.parse(data),text="";return encoded_data.success.length>0&&(text+=encoded_data.success),encoded_data.error.length>0&&(text+=0===text.length?"":"<br/>",text+="Error: "+encoded_data.error),encoded_data.system_error.length>0&&(text+=0===text.length?"":"<br/>",text+="Error: "+encoded_data.system_error),text}catch(e){return data}},do_ajax_remove_akkredi_member(){let button=jQuery("#plekRemoveAkkreiCrewBtn"),user_name=button.data("user"),event_id=button.data("eventid");jQuery.ajax({url:window.ajaxurl,data:{action:"plek_event_actions",do:"remove_akkredi_member",id:event_id,user:user_name},success:function success(data){let text=plek_single_event_main.get_text_from_ajax_request(data);plek_main.deactivate_button_loader(button,text),plek_main.deactivate_button(button);try{let encoded_data;JSON.parse(data).success.length>0&&jQuery(".event-akkredi-container").hide()}catch(e){}},error:function error(data){plek_main.deactivate_button_loader(button,"Error loading data.... ")}})},do_ajax_publish_event(){let button=jQuery("#plekSetEventStatus"),type=button.data("type"),event_id=button.data("eventid");jQuery.ajax({url:window.ajaxurl,data:{action:"plek_ajax_event_form",id:event_id,type:type},success:function success(data){let text=plek_single_event_main.get_text_from_ajax_request(data);plek_main.deactivate_button_loader(button,text),plek_main.deactivate_button(button)},error:function error(data){plek_main.deactivate_button_loader(button,"Error loading data.... ")}})}};plek_single_event_main.construct();